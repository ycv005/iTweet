{"ast":null,"code":"import _toConsumableArray from\"/home/yash/programming/django_proj/iTweet/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/yash/programming/django_proj/iTweet/react-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{listTweet}from\"../lookup/index.js\";export function TweetComponent(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newTweets=_useState2[0],setNewTweets=_useState2[1];var textAreaRef=React.createRef();var tempTweet;var handleSubmit=function handleSubmit(event){event.preventDefault();var newVal=textAreaRef.current.value;tempTweet=_toConsumableArray(newTweets);tempTweet.unshift({context:newVal,likes:0,id:2323});setNewTweets(tempTweet);textAreaRef.current.value=\"\";};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{className:\"my-5\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary\"},\"Tweet Now\"))),/*#__PURE__*/React.createElement(TweetsList,{newTweets:newTweets}));}export function TweetsList(props){var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tweetsInit=_useState4[0],setTweetsInit=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tweets=_useState6[0],setTweets=_useState6[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){var myCallback=function myCallback(response,status){if(status===200){setTweetsInit(response);}else{console.log(\"possibly you didn't start the django server\");alert(\"There was an error, ok-\",status);}};listTweet(myCallback);},[]);return tweets.map(function(tweet,index){return/*#__PURE__*/React.createElement(Tweet,{tweet:tweet,className:\"my-5 py-5 border bg-white col-10\",key:index});});}export function ActionBtn(props){var tweet=props.tweet,action=props.action;// TODO: tweet.userLike is undefined\nvar _useState7=useState(tweet.likes),_useState8=_slicedToArray(_useState7,2),likes=_useState8[0],setLikes=_useState8[1];var _useState9=useState(tweet.userLike===true?true:false),_useState10=_slicedToArray(_useState9,2),justClicked=_useState10[0],setJustClicked=_useState10[1];var handleClick=function handleClick(event){event.preventDefault();if(action.type===\"like\"){if(justClicked===false){setJustClicked(true);setLikes(likes+1);}else{setJustClicked(false);setLikes(likes-1);}}};var display=action.type===\"like\"?\"\".concat(likes,\" Likes\"):\"\".concat(action.display);return/*#__PURE__*/React.createElement(\"button\",{onClick:handleClick,className:\"btn btn-primary\"},display);}export function Tweet(props){var tweet=props.tweet;var className=props.className;return/*#__PURE__*/React.createElement(\"div\",{className:className},/*#__PURE__*/React.createElement(\"p\",{className:\"text-dark\"},tweet.context),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-group\"},/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:\"like\",display:\"Likes\"}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:\"unlike\",display:\"Unlike\"}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:\"retweet\",display:\"Retweet\"}})));}","map":{"version":3,"sources":["/home/yash/programming/django_proj/iTweet/react-app/src/tweets/components.js"],"names":["React","useEffect","useState","listTweet","TweetComponent","props","newTweets","setNewTweets","textAreaRef","createRef","tempTweet","handleSubmit","event","preventDefault","newVal","current","value","unshift","context","likes","id","TweetsList","tweetsInit","setTweetsInit","tweets","setTweets","final","concat","length","myCallback","response","status","console","log","alert","map","tweet","index","ActionBtn","action","setLikes","userLike","justClicked","setJustClicked","handleClick","type","display","Tweet","className"],"mappings":"4VAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,oBAA1B,CAEA,MAAO,SAASC,CAAAA,cAAT,CAAwBC,KAAxB,CAA+B,eACFH,QAAQ,CAAC,EAAD,CADN,wCAC7BI,SAD6B,eAClBC,YADkB,eAEpC,GAAMC,CAAAA,WAAW,CAAGR,KAAK,CAACS,SAAN,EAApB,CACA,GAAIC,CAAAA,SAAJ,CACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,KAAD,CAAW,CAC9BA,KAAK,CAACC,cAAN,GACA,GAAMC,CAAAA,MAAM,CAAGN,WAAW,CAACO,OAAZ,CAAoBC,KAAnC,CACAN,SAAS,oBAAOJ,SAAP,CAAT,CACAI,SAAS,CAACO,OAAV,CAAkB,CAChBC,OAAO,CAAEJ,MADO,CAEhBK,KAAK,CAAE,CAFS,CAGhBC,EAAE,CAAE,IAHY,CAAlB,EAKAb,YAAY,CAACG,SAAD,CAAZ,CACAF,WAAW,CAACO,OAAZ,CAAoBC,KAApB,CAA4B,EAA5B,CACD,CAXD,CAYA,mBACE,4CACE,4BAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAEL,YAAjC,eACE,2BAAK,SAAS,CAAC,YAAf,eACE,gCACE,GAAG,CAAEH,WADP,CAEE,QAAQ,KAFV,CAGE,SAAS,CAAC,cAHZ,EADF,CADF,cAQE,2BAAK,SAAS,CAAC,YAAf,eACE,8BAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,cADF,CARF,CADF,cAeE,oBAAC,UAAD,EAAY,SAAS,CAAEF,SAAvB,EAfF,CADF,CAmBD,CAED,MAAO,SAASe,CAAAA,UAAT,CAAoBhB,KAApB,CAA2B,gBACIH,QAAQ,CAAC,EAAD,CADZ,yCACzBoB,UADyB,eACbC,aADa,8BAEJrB,QAAQ,CAAC,EAAD,CAFJ,yCAEzBsB,MAFyB,eAEjBC,SAFiB,eAGhCxB,SAAS,CAAC,UAAM,CACd,GAAMyB,CAAAA,KAAK,CAAG,mBAAIrB,KAAK,CAACC,SAAV,EAAqBqB,MAArB,CAA4BL,UAA5B,CAAd,CACA,GAAII,KAAK,CAACE,MAAN,GAAiBJ,MAAM,CAACI,MAA5B,CAAoC,CAClCH,SAAS,CAACC,KAAD,CAAT,CACD,CACF,CALQ,CAKN,CAACrB,KAAK,CAACC,SAAP,CAAkBkB,MAAlB,CAA0BF,UAA1B,CALM,CAAT,CAMArB,SAAS,CAAC,UAAM,CACd,GAAM4B,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,QAAD,CAAWC,MAAX,CAAsB,CACvC,GAAIA,MAAM,GAAK,GAAf,CAAoB,CAClBR,aAAa,CAACO,QAAD,CAAb,CACD,CAFD,IAEO,CACLE,OAAO,CAACC,GAAR,CAAY,6CAAZ,EACAC,KAAK,CAAC,yBAAD,CAA4BH,MAA5B,CAAL,CACD,CACF,CAPD,CAQA5B,SAAS,CAAC0B,UAAD,CAAT,CACD,CAVQ,CAUN,EAVM,CAAT,CAWA,MAAOL,CAAAA,MAAM,CAACW,GAAP,CAAW,SAACC,KAAD,CAAQC,KAAR,CAAkB,CAClC,mBACE,oBAAC,KAAD,EACE,KAAK,CAAED,KADT,CAEE,SAAS,CAAC,kCAFZ,CAGE,GAAG,CAAEC,KAHP,EADF,CAOD,CARM,CAAP,CASD,CAED,MAAO,SAASC,CAAAA,SAAT,CAAmBjC,KAAnB,CAA0B,IACvB+B,CAAAA,KADuB,CACL/B,KADK,CACvB+B,KADuB,CAChBG,MADgB,CACLlC,KADK,CAChBkC,MADgB,CAE/B;AAF+B,eAGLrC,QAAQ,CAACkC,KAAK,CAACjB,KAAP,CAHH,yCAGxBA,KAHwB,eAGjBqB,QAHiB,8BAIOtC,QAAQ,CAC5CkC,KAAK,CAACK,QAAN,GAAmB,IAAnB,CAA0B,IAA1B,CAAiC,KADW,CAJf,0CAIxBC,WAJwB,gBAIXC,cAJW,gBAO/B,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAAChC,KAAD,CAAW,CAC7BA,KAAK,CAACC,cAAN,GACA,GAAI0B,MAAM,CAACM,IAAP,GAAgB,MAApB,CAA4B,CAC1B,GAAIH,WAAW,GAAK,KAApB,CAA2B,CACzBC,cAAc,CAAC,IAAD,CAAd,CACAH,QAAQ,CAACrB,KAAK,CAAG,CAAT,CAAR,CACD,CAHD,IAGO,CACLwB,cAAc,CAAC,KAAD,CAAd,CACAH,QAAQ,CAACrB,KAAK,CAAG,CAAT,CAAR,CACD,CACF,CACF,CAXD,CAaA,GAAM2B,CAAAA,OAAO,CACXP,MAAM,CAACM,IAAP,GAAgB,MAAhB,WAA4B1B,KAA5B,qBAA+CoB,MAAM,CAACO,OAAtD,CADF,CAEA,mBACE,8BAAQ,OAAO,CAAEF,WAAjB,CAA8B,SAAS,CAAC,iBAAxC,EACGE,OADH,CADF,CAKD,CAED,MAAO,SAASC,CAAAA,KAAT,CAAe1C,KAAf,CAAsB,CAC3B,GAAM+B,CAAAA,KAAK,CAAG/B,KAAK,CAAC+B,KAApB,CACA,GAAMY,CAAAA,SAAS,CAAG3C,KAAK,CAAC2C,SAAxB,CACA,mBACE,2BAAK,SAAS,CAAEA,SAAhB,eACE,yBAAG,SAAS,CAAC,WAAb,EAA0BZ,KAAK,CAAClB,OAAhC,CADF,cAEE,2BAAK,SAAS,CAAC,eAAf,eACE,oBAAC,SAAD,EAAW,KAAK,CAAEkB,KAAlB,CAAyB,MAAM,CAAE,CAAES,IAAI,CAAE,MAAR,CAAgBC,OAAO,CAAE,OAAzB,CAAjC,EADF,cAEE,oBAAC,SAAD,EACE,KAAK,CAAEV,KADT,CAEE,MAAM,CAAE,CAAES,IAAI,CAAE,QAAR,CAAkBC,OAAO,CAAE,QAA3B,CAFV,EAFF,cAME,oBAAC,SAAD,EACE,KAAK,CAAEV,KADT,CAEE,MAAM,CAAE,CAAES,IAAI,CAAE,SAAR,CAAmBC,OAAO,CAAE,SAA5B,CAFV,EANF,CAFF,CADF,CAgBD","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { listTweet } from \"../lookup/index.js\";\n\nexport function TweetComponent(props) {\n  const [newTweets, setNewTweets] = useState([]);\n  const textAreaRef = React.createRef();\n  var tempTweet;\n  const handleSubmit = (event) => {\n    event.preventDefault();\n    const newVal = textAreaRef.current.value;\n    tempTweet = [...newTweets];\n    tempTweet.unshift({\n      context: newVal,\n      likes: 0,\n      id: 2323,\n    });\n    setNewTweets(tempTweet);\n    textAreaRef.current.value = \"\";\n  };\n  return (\n    <div>\n      <form className=\"my-5\" onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <textarea\n            ref={textAreaRef}\n            required\n            className=\"form-control\"\n          ></textarea>\n        </div>\n        <div className=\"form-group\">\n          <button type=\"submit\" className=\"btn btn-primary\">\n            Tweet Now\n          </button>\n        </div>\n      </form>\n      <TweetsList newTweets={newTweets} />\n    </div>\n  );\n}\n\nexport function TweetsList(props) {\n  const [tweetsInit, setTweetsInit] = useState([]);\n  const [tweets, setTweets] = useState([]);\n  useEffect(() => {\n    const final = [...props.newTweets].concat(tweetsInit);\n    if (final.length !== tweets.length) {\n      setTweets(final);\n    }\n  }, [props.newTweets, tweets, tweetsInit]);\n  useEffect(() => {\n    const myCallback = (response, status) => {\n      if (status === 200) {\n        setTweetsInit(response);\n      } else {\n        console.log(\"possibly you didn't start the django server\");\n        alert(\"There was an error, ok-\", status);\n      }\n    };\n    listTweet(myCallback);\n  }, []);\n  return tweets.map((tweet, index) => {\n    return (\n      <Tweet\n        tweet={tweet}\n        className=\"my-5 py-5 border bg-white col-10\"\n        key={index}\n      />\n    );\n  });\n}\n\nexport function ActionBtn(props) {\n  const { tweet, action } = props;\n  // TODO: tweet.userLike is undefined\n  const [likes, setLikes] = useState(tweet.likes);\n  const [justClicked, setJustClicked] = useState(\n    tweet.userLike === true ? true : false\n  );\n  const handleClick = (event) => {\n    event.preventDefault();\n    if (action.type === \"like\") {\n      if (justClicked === false) {\n        setJustClicked(true);\n        setLikes(likes + 1);\n      } else {\n        setJustClicked(false);\n        setLikes(likes - 1);\n      }\n    }\n  };\n\n  const display =\n    action.type === \"like\" ? `${likes} Likes` : `${action.display}`;\n  return (\n    <button onClick={handleClick} className=\"btn btn-primary\">\n      {display}\n    </button>\n  );\n}\n\nexport function Tweet(props) {\n  const tweet = props.tweet;\n  const className = props.className;\n  return (\n    <div className={className}>\n      <p className=\"text-dark\">{tweet.context}</p>\n      <div className=\"btn btn-group\">\n        <ActionBtn tweet={tweet} action={{ type: \"like\", display: \"Likes\" }} />\n        <ActionBtn\n          tweet={tweet}\n          action={{ type: \"unlike\", display: \"Unlike\" }}\n        />\n        <ActionBtn\n          tweet={tweet}\n          action={{ type: \"retweet\", display: \"Retweet\" }}\n        />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}